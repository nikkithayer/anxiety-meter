<html>
	<head>
    <link rel="stylesheet" media="screen" href="http://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript">
	    
			$( document ).ready(function() {								
				var fadeInSpeed = 750;
				var promptText = ["What's making you anxious?", "Anything else?"];
				var btnText = ["Okay.", "I'm sorry to hear that.", "Got it.", "I hear you."];
				var btnCompletionText = "No, I'm done.";
				var painText = "How bad is it?";
												
				var answers = [];
				var pain = [];
				

				var firstQuestion = true;
				var posOffset = -500;
				
				showNewQuestion();
				$('input:text:visible:first')[0].focus();

				
				
				function showNewQuestion(){
					var prompt = promptText[1];
					if (firstQuestion){
						prompt = promptText[0];
					}
					var newContent = "<h1>"+prompt+"</h1><input type='text' />";
					fadeInNewContent(newContent, ".inner");
					if(!firstQuestion){
						newContent = "<button class='completedQuestions'>"+btnCompletionText+"</button>";
						fadeInNewContent(newContent, ".inner");
					}
					firstQuestion = false;
				}
				
				function showPainList(){
					var newContent = "<h1>"+painText+"</h1><div class='pain-list'>";
					fadeInNewContent(newContent, ".inner");
					var nextContent = "";
					for(i = 1; i < 7; i++){
						nextContent += "<div class='pain-"+i+"'></div>";
					}
					fadeInNewContent(nextContent, ".pain-list:last-child");
					$(".inner").append("</div>");
				}
				
				function logPainLevel(painLevel){
					pain.push(parsePainLevel(painLevel));
					showNewQuestion();
				}
				
				function parsePainLevel(painLevel){
					var painNumber = parseInt(painLevel.charAt(5));
					return painNumber;
				}
				
				function computeResult(){
					var combinedAnswers = []; 
					for(i = 0; i < pain.length; i++) {
					    var hash = {};
					    hash[pain[i]] = answers[i];
					    combinedAnswers.push(hash);
					}					
					console.log(combinedAnswers);
					$(".inner").children().addClass("invisible");
				}
				
				function fadeInNewContent(newContent, destination){
					$(newContent).hide().appendTo(destination).fadeIn(fadeInSpeed);
					var newPos = $(".inner").children().last().offset().top;
						$('html, body').animate({
							scrollTop: newPos+posOffset
						}, 800, "linear");
				}
				
//button should appear when current input field isn't empty, rather than when you focus out
				$(document).on('focus', 'input:text', function(){
					$(".completedQuestions").addClass("invisible");
				});

				$(document).on('focusout', 'input:text', function(){
					if($(this).val()!=""){
						answers.push($(this).val());
						showPainList();
					}
				});
				
				$(document).on('click', '.completedQuestions', function(){
					computeResult();
				});
				
				$(document).on('click', '.pain-list div', function(){
					logPainLevel($(this).attr("class"));
				});
				
				
				Array.prototype.randomElement = function () {
					return this[Math.floor(Math.random() * this.length)]
				}
			
// pressing the button fades in the measurement text and positions it at the top of the screen
// pressing any mood shows a selected state
// pressing any mood fades in the button with the option to add more or be done
// all results are listed
// when you load the page, it's automatically focused on the input field on mobile

			});

	</script>

		<style type="text/css">
			body{
				background-color: #EAFFFE;
				font-size: 16px;
				font-family: "Helvetica Neue", "Helvetica", "Arial", sans-serif;
				font-weight: 200;
			}
			body:after{
				width: 100%;
				height: 10vh;
				position: fixed;
				background: linear-gradient(0deg, rgba(234, 255, 254, 0), rgba(234, 255, 254, 1));
				top: 0;
				left: 0;
				content: "";
			}
			.inner{
				max-width: 600px;
				display: block;
				margin: 0 auto;
				padding-bottom: 100vh;
			}
			
			h1{
				font-size: 2em;
				color: #19B7E8;	
				margin: 10vh 0;
				display: block;
			}
			
			input[type="text"]{
				width: 100%;
				border: none;
				background-color: transparent;
				border-bottom: 1px solid #19B7E8;
				font-size: 1.5em;
				color: #4E6E77;
				font-weight: 400;
			}
			input[type="text"]:focus{
				outline: none;
			}
			
			button{
				width: 40%;
				background-color: #12E1AE;
				color: #fff;
				font-size: 1em;
				font-weight: 200;
				letter-spacing: 1.125px;
				border: none;
				margin: 5vh 0;
				padding: 2vh;
			}
			.invisible{
				opacity: 0;
				transition: all 500ms ease-out;
			}
			
			.pain-list{
				display: flex;
				justify-content: space-around;
			}
			
			.pain-list div{
				width: 65px;
				height: 65px;
				border-radius: 100%;
				display: inline-block;
				margin-bottom: 15px;
			}
			.pain-list div:hover{
				transform: scale(1.2);
				transition: all 400ms ease-in-out;
			}
			
			.pain-1{ background: #19B7E8 url(images/pain-1.svg) no-repeat center center;}
			.pain-2{ background: #12E1AE url(images/pain-2.svg) no-repeat center center;}
			.pain-3{ background: #EBD800 url(images/pain-3.svg) no-repeat center center;}
			.pain-4{ background: #FFA01D url(images/pain-4.svg) no-repeat center center;}
			.pain-5{ background: #FF740C url(images/pain-5.svg) no-repeat center center;}
			.pain-6{ background: #E80A0A url(images/pain-6.svg) no-repeat center center;}
		</style>
	</head>
	<body>
		<div class="inner">
			
		</div>
	</body>
</html>